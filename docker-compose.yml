version: '3'

services:
    db:
        image: mysql:5.6.50
        environment:
            MYSQL_DATABASE: root
            MYSQL_ROOT_PASSWORD: password
        ports:
            - "4306:3306"
        volumes:
            - ./db/mysql/volumes:/var/lib/mysql

    web:
        build: .
        command: rails s -p 3000 -b '0.0.0.0'
        volumes:
            - .:/SAKELIKE
        ports:
            - 3000:3000
        links:
            - db
        environment:
          BASIC_AUTH_USER: ${BASIC_AUTH_USER:-default}
          BASIC_AUTH_PASSWORD: ${BASIC_AUTH_PASSWORD-default}
          AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID:-default}
          AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY:-default}